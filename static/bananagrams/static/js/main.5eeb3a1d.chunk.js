(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{31:function(e,t,r){e.exports=r(44)},37:function(e,t,r){},38:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(26),l=r.n(a),i=r(21),o=r.n(i),u=(r(37),r(38),r(24)),s=r(7),f=r(2),d=r(52),b=r(49),g=r(47),O=r(55),j=r(53),v=r(54),m=r(27),y=r.n(m),h=r(48),p=r(29),k=r(50),A=r(51),C="tile",D=r(9),E=r.n(D),w=(r(39),{width:"100%",height:"100%"});function S(e){var t=E()({Tile:!0,"is-highlighted":e.isHighlighted});return c.a.createElement("div",{className:t,style:w},e.letter)}r(40);function M(e){var t=e.r,r=e.c,a=e.handleClick,l=Object(n.useCallback)((function(){a({r:t,c:r})}),[t,r,a]),i=Object(n.useRef)(null),o=Object(k.a)({item:{type:C,id:{r:t,c:r,letter:e.letter}},collect:function(e){return{isDragging:!!e.isDragging()}}}),u=Object(s.a)(o,2),f=u[0].isDragging,d=u[1],b=Object(A.a)({accept:C,drop:function(n){e.onDrop(n.id,{r:t,c:r})},collect:function(e){return{isOver:!!e.isOver()}}}),g=Object(s.a)(b,2),O=g[0].isOver;d((0,g[1])(i));var j=Object(n.useMemo)((function(){return{left:50*r,top:50*t,zIndex:"".concat(r+1).concat(t+1)}}),[t,r]),v=E()({BoardTile:!0,"is-hovered":O,"is-dragging":f});return c.a.createElement("div",{className:v,style:j,ref:i,onClick:l},c.a.createElement(S,{letter:e.letter,isHighlighted:O}))}var z=c.a.memo((function(e){var t=e.r,r=e.c,a=e.handleClick,l=Object(n.useCallback)((function(){a({r:t,c:r})}),[t,r,a]),i=Object(A.a)({accept:C,drop:function(n){e.onDrop(n.id,{r:t,c:r})},collect:function(e){return{isOver:!!e.isOver()}}}),o=Object(s.a)(i,2),u=o[0].isOver,f=o[1],d=E()({"Board-square":!0,"is-hovered":u,"is-selected":e.selected}),b=e.direction,g=Object(n.useMemo)((function(){return{zIndex:"".concat(r+1).concat(t+2)}}),[t,r]);return c.a.createElement("div",{ref:f,className:d,onClick:l},e.selected&&c.a.createElement("div",{className:"Board-squareOverlay",style:g},"right"===b?"\u2192":"\u2193"))}));r(42);function N(e){for(var t=e.selectedCell,r=[],a=0;a<e.size;a++)for(var l=0;l<e.size;l++){var i=!!t&&(t.r===a&&t.c===l);r.push(c.a.createElement(z,{r:a,c:l,selected:i,direction:e.selectedDirection,handleClick:i?e.onSelectedSquareClick:e.handleUnselectedCellClick,onDrop:e.onTileDrop,key:a*e.size+l}))}var o=e.tiles.flatMap((function(r,n){return r.map((function(r,a){var l=!!t&&(t.r===n&&t.c===a);return r?c.a.createElement(M,{letter:r,r:n,c:a,handleClick:l?e.onSelectedSquareClick:e.handleUnselectedCellClick,key:n*e.size+a,onDrop:e.onTileDrop}):null}))})),u=Object(n.useMemo)((function(){return{display:"grid",gridTemplate:"repeat(".concat(e.size,", ").concat(50,"px) / repeat(").concat(e.size,", ").concat(50,"px)")}}),[e.size]);return c.a.createElement("div",{className:"Board",style:u},r,o)}r(43);function x(e){var t=Object(A.a)({accept:C,drop:function(t){e.onDrop(t.id,null)},collect:function(e){return{isOver:!!e.isOver()}}}),r=Object(s.a)(t,2),n=(r[0].isOver,r[1]),a=e.letters.map((function(e,t){return c.a.createElement(B,{key:t,letter:e})}));return c.a.createElement("div",{className:"Staging",ref:n},a)}function B(e){var t=Object(k.a)({item:{type:C,id:{r:null,c:null,letter:e.letter}},collect:function(e){return{isDragging:!!e.isDragging()}}}),r=Object(s.a)(t,2),n=(r[0].isDragging,r[1]);return c.a.createElement("div",{ref:n,className:"Staging-slot"},c.a.createElement(S,{letter:e.letter}))}var L=[].concat(Object(f.a)(Array(13).fill("a")),Object(f.a)(Array(3).fill("b")),Object(f.a)(Array(3).fill("c")),Object(f.a)(Array(6).fill("d")),Object(f.a)(Array(18).fill("e")),Object(f.a)(Array(3).fill("f")),Object(f.a)(Array(4).fill("g")),Object(f.a)(Array(3).fill("h")),Object(f.a)(Array(12).fill("i")),Object(f.a)(Array(2).fill("j")),Object(f.a)(Array(2).fill("k")),Object(f.a)(Array(5).fill("l")),Object(f.a)(Array(3).fill("m")),Object(f.a)(Array(8).fill("n")),Object(f.a)(Array(11).fill("o")),Object(f.a)(Array(3).fill("p")),Object(f.a)(Array(2).fill("q")),Object(f.a)(Array(9).fill("r")),Object(f.a)(Array(6).fill("s")),Object(f.a)(Array(9).fill("t")),Object(f.a)(Array(6).fill("u")),Object(f.a)(Array(3).fill("v")),Object(f.a)(Array(3).fill("w")),Object(f.a)(Array(2).fill("x")),Object(f.a)(Array(3).fill("y")),Object(f.a)(Array(2).fill("z"))),T=[].concat(Object(f.a)(Array(4).fill("a")),Object(f.a)(Array(2).fill("b")),Object(f.a)(Array(2).fill("c")),Object(f.a)(Array(2).fill("d")),Object(f.a)(Array(4).fill("e")),Object(f.a)(Array(2).fill("f")),Object(f.a)(Array(2).fill("g")));function q(e){var t=Math.floor(Math.random()*e.length);return{values:e.length?[e[t]]:[],remaining:Object(d.a)(t,1,e)}}function U(e,t,r){var n=t.r,c=t.c,a=e.map((function(e){return e.slice()}));return a[n][c]=r,a}function I(e,t){var r=t.r,n=t.c,c=e.map((function(e){return e.slice()}));return c[r][n]="",c}function R(e){for(var t=0;t<e.length;t++)for(var r=0;r<e[t].length;r++)if(e[t][r])return!1;return!0}function H(e){var t=e.r,r=e.c;return[{r:t+1,c:r},{r:t-1,c:r},{r:t,c:r+1},{r:t,c:r-1}]}var J=Object(b.a)((function(e,t){var r=t.r,n=t.c;return 0<=r&&r<e.length&&0<=n&&n<e[r].length}));var P=Array.from({length:30}).map((function(){return Array.from({length:30}).map(Object(g.a)(""))})),W={display:"flex"};function Y(e){switch(e){case"left":return"right";case"right":return"left";case"down":return"up";case"up":return"down";default:return"left"}}function F(e,t,r){var n=t.r,c=t.c,a=function(e,t){var r=e.r,n=e.c;return"right"===t?{r:r,c:n+1}:"down"===t?{r:r+1,c:n}:"left"===t?{r:r,c:n-1}:"up"===t?{r:r-1,c:n}:{r:r,c:n}}({r:n,c:c},r);return a.r<e.length&&a.c<e[a.r].length?a:{r:n,c:c}}var G={height:800,width:800,border:"2px solid magenta",overflow:"hidden",backgroundColor:"wheat"},K=Object(b.a)((function(e,t,r){var n=e.map((function(e){return e.slice()})),c=n[t.r][t.c];return n[t.r][t.c]=n[r.r][r.c],n[r.r][r.c]=c,n}));function Q(){var e=Object(n.useState)({board:P,bag:T,staging:[]}),t=Object(s.a)(e,2),r=t[0],a=r.board,l=r.bag,i=r.staging,o=t[1],b=Object(n.useState)({selectedCell:null,selectedDirection:null}),g=Object(s.a)(b,2),m=g[0],k=m.selectedCell,A=m.selectedDirection,C=g[1],D=Object(n.useState)(!1),E=Object(s.a)(D,2),w=E[0],S=E[1],M=Object(n.useState)(!1),z=Object(s.a)(M,2),B=z[0],Q=z[1];Object(n.useEffect)((function(){var e=function(e){Object(v.a)(e.key,i)?(o((function(t){var r=t.board,n=t.bag,c=t.staging;return{board:U(r,k,e.key),bag:n,staging:""===r[k.r][k.c]?Object(d.a)(Object(j.a)(e.key,c),1,c):Object(O.a)(r[k.r][k.c],Object(d.a)(Object(j.a)(e.key,c),1,c))}})),C({selectedCell:F(a,k,A),selectedDirection:A})):"ArrowDown"===e.key?C((function(e){var t=e.selectedCell;return{selectedCell:"down"===e.selectedDirection?F(a,t,"down"):t,selectedDirection:"down"}})):"ArrowLeft"===e.key?C((function(e){var t=e.selectedCell,r=e.selectedDirection;return{selectedCell:F(a,t,"left"),selectedDirection:r}})):"ArrowRight"===e.key?C((function(e){var t=e.selectedCell;return{selectedCell:"right"===e.selectedDirection?F(a,t,"right"):t,selectedDirection:"right"}})):"ArrowUp"===e.key?C((function(e){var t=e.selectedCell,r=e.selectedDirection;return{selectedCell:F(a,t,"up"),selectedDirection:r}})):"Backspace"===e.key?(e.preventDefault(),o((function(e){var t=e.bag,r=e.board,n=e.staging;return{board:U(r,k,""),staging:""!==r[k.r][k.c]?Object(O.a)(r[k.r][k.c],n):n,bag:t}})),C((function(e){var t=e.selectedCell,r=e.selectedDirection;return{selectedCell:F(a,t,Y(r)),selectedDirection:r}}))):" "===e.key&&S(!0)};function t(e){" "===e.key&&S(!1)}return window.addEventListener("keydown",e),window.addEventListener("keyup",t),function(){window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}}),[k,l,a,i,A,w]);var V=Object(n.useMemo)((function(){return function(e,t){e||C({selectedCell:"right"===A?t:null,selectedDirection:"right"===A?"down":null})}}),[A]),X=Object(n.useMemo)((function(){return function(e,t){e||C({selectedCell:t,selectedDirection:"right"})}}),[C]),Z=Object(n.useMemo)((function(){return function(e){return V(w,e)}}),[w,V]),$=Object(n.useMemo)((function(){return function(e){return X(w,e)}}),[w,X]);var _=Object(n.useMemo)((function(){return function(e){var t=function(e,t){for(var r=[],n=e,c=0;c<t;c++){var a=q(n),l=a.values,i=a.remaining;r=[].concat(Object(f.a)(r),Object(f.a)(l)),n=i}return{values:r,remaining:n}}(l,e),r=t.values,n=t.remaining;o((function(e){return Object(u.a)({},e,{bag:n,staging:[].concat(Object(f.a)(e.staging),Object(f.a)(r))})}))}}),[l]),ee=Object(n.useMemo)((function(){return function(){return _(15)}}),[_]),te=Object(n.useMemo)((function(){return function(){return _(1)}}),[_]),re=R(a)&&0===i.length,ne=0===l.length,ce=Object(n.useMemo)((function(){return function(e){if(R(e))return!0;for(var t=function(e){return e.reduce((function(e,t){return e+t.reduce((function(e,t){return e+(""===t?0:1)}),0)}),0)}(e),r=function(e){for(var t=0;t<e.length;t++)for(var r=0;r<e[t].length;r++)if(e[t][r])return{r:t,c:r}}(e),n=r.r,c=r.c,a=new Set,l=[{r:n,c:c}],i=0;l.length;){var o=l.pop();if(!a.has("".concat(o.r,",").concat(o.c))){a.add("".concat(o.r,",").concat(o.c)),i+=1;var u=H(o).filter(J(e)).filter((function(t){var r=t.r,n=t.c;return!!e[r][n]}));l=[].concat(Object(f.a)(l),Object(f.a)(u))}}return t===i}(a)}),[a]),ae=Object(n.useCallback)((function(){return w}),[w]),le=Object(n.useMemo)((function(){return{position:"relative",cursor:w?"grab":"default",left:-375,top:-375}}),[w]),ie=Object(n.useCallback)((function(e,t){return o((function(r){return Object(u.a)({},r,{},function(e,t,r){var n=e.board,c=e.staging;return null===r?{board:null!==t.r?I(n,t):n,staging:null!==t.r?Object(O.a)(t.letter,c):c}:{board:null!==t.r?K(n,t,r):U(n,r,t.letter),staging:null!==t.r?c:Object(d.a)(Object(j.a)(t.letter,c),1,c)}}(r,e,t))}))}),[o]);return c.a.createElement("div",null,c.a.createElement("div",{style:W},c.a.createElement(h.a,{backend:p.a},c.a.createElement("div",{className:"Board-window",style:G},c.a.createElement(y.a,{onStart:ae},c.a.createElement("div",{style:le},c.a.createElement(N,{size:30,selectedCell:k,selectedDirection:A,onSelectedSquareClick:Z,handleUnselectedCellClick:$,onTileDrop:ie,tiles:a})))),c.a.createElement(x,{letters:i,onDrop:ie}))),c.a.createElement("div",null,B&&"YOU WON!",!B&&re&&c.a.createElement("button",{onClick:ee},"DRAW TILES"),!B&&c.a.createElement("button",{disabled:!ce||ne||0!==i.length,onClick:te},"PEEL"),!B&&c.a.createElement("button",{disabled:!ne||!ce||0!==i.length,onClick:function(){Q(!0)}},"BANANAS!"),c.a.createElement("button",{onClick:function(){o({board:P,bag:L,staging:[]}),Q(!1)}},"Restart")))}l()(c.a,{trackAllPureComponents:!0});var V=document.getElementById("root");o.a.render(c.a.createElement(Q,null),V)}},[[31,1,2]]]);
//# sourceMappingURL=main.5eeb3a1d.chunk.js.map